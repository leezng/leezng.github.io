---
title: JSBridge
date: 2018-04-08 17:04:55
tags: JavaScript
---

## 一些前端通信场景

- 组件通信 eventEmitter, ...
- 页面之间的通信 postMessage, ...
- 前后端之间的通信 xhr, websocket, ...
- web 与客户端等通信

## 一些前端通信方案

- CMD命令
- 本地开启web服务器
- JSBridge

## 理解 JSBridge

>JSBridge 是连接 Native 与 JavaScript 的桥梁, 通过 JSBridge 实现双向通信。

<!-- more -->

![Mind](data:image/jpg;base64,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)

web 通过触发 URL Scheme，Native 捕获 URL, 解析并执行进一步操作
web 通过 JSBridge 注册本地方法, Native 执行调用 web 的方法

## 约定格式的 Scheme 协议

`[customscheme:][methodName][?param1=data1&param2=data2]`

- customscheme: 自定义需要拦截的 scheme
- methodName: 需要调用的 native 的方法
- params: 传递给 native 的参数

一些简单的例子:

`jsb://hideTitle` 隐藏标题

`jsb://goTo?page=abc` 跳转到页面 abc

`jsb://goTo?page=abc&callback=function(){}` 跳转到页面 abc, 并执行回调

## 如何发出 Scheme 请求

>通常的做法是创建一个隐藏的 iframe

```js
function createJsbridge (src) {
  var iframe = document.createElement('iframe')
  iframe.style.display = 'none'
  iframe.src = src
  document.documentElement.appendChild(iframe)
  setTimeout(function () {
    document.documentElement.removeChild(iframe)
  }, 0)
}
```

## 设计一个简单的 JSBridge

- `registerHandler(methodName, [callback])` web 在此注册本地 JS 方法, 注册后供 Native 可通过 JSBridge 进行调用。
- `callHandler(methodName, [optins], [callback])` 供 web 调用原生开放的 api。(本质是通过 url scheme 触发)。
- `handleMessageFromNative(methodName)` 供 Native 调用 web 页面注册的方法, 或者通知 web 页面执行回调方法。

### callHandler 函数内部实现过程

- 若存在回调, 则收集
- 通过特定方法, 将 `methodName`, `optins` 等拼接成一个URL Scheme
- 发出 Scheme 请求

<https://github.com/marcuswestin/WebViewJavascriptBridge>
<https://github.com/lzyzsd/JsBridge>

## 参考链接

- <https://dailc.github.io/2016/10/04/hybridBase04JSbridgePrinciple.html>
- <http://travelchu.com/2016/03/14/%E7%90%86%E8%A7%A3JSBridge/>
- <https://zhuanlan.zhihu.com/p/32899522>
- <https://juejin.im/entry/58ef1f5b5c497d006c72b04c>
- <https://github.com/rainjay/blog/issues/4>
